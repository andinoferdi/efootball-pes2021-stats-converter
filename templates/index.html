<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eFootball â†’ PES 2021 Stats Converter</title>
    
    <!-- Poppins Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: ['selector', '[data-theme="dark"]'],
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        background: 'var(--color-background)',
                        foreground: 'var(--color-foreground)',
                        muted: 'var(--color-muted)',
                        border: 'var(--color-border)',
                        card: 'var(--color-card)',
                        accent: 'var(--color-accent)',
                    }
                }
            }
        }
    </script>
    
    <!-- Modular CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    
    <!-- Theme initialization (must load early to prevent flash) -->
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script>
        (function() {
            Theme.init();
        })();
    </script>
</head>
<body class="bg-background text-foreground font-sans min-h-screen antialiased">
    <!-- Animated background grid -->
    <div class="fixed inset-0 -z-10 overflow-hidden">
        <div class="grid-pattern"></div>
        <div class="gradient-orb gradient-orb-1"></div>
        <div class="gradient-orb gradient-orb-2"></div>
    </div>

    <div class="container mx-auto px-4 py-12 max-w-6xl relative">
        <!-- Theme Toggle Button -->
        <button id="themeToggle" type="button" class="fixed top-4 right-4 z-50 p-2 rounded-full border border-border bg-card/80 backdrop-blur-sm hover:bg-card transition-colors" aria-label="Toggle theme">
            <svg id="themeIconLight" class="w-5 h-5 text-foreground hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            <svg id="themeIconDark" class="w-5 h-5 text-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
        </button>

        <!-- Header with fade-in animation -->
        <header class="mb-12 text-center animate-fade-in">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-border bg-card/50 backdrop-blur-sm mb-6">
                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                <span class="text-sm text-muted">ML-Powered Conversion</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">
                <span class="text-gradient">eFootball</span> â†’ PES 2021
            </h1>
            <p class="text-muted text-lg max-w-xl mx-auto leading-relaxed">
                Convert your eFootball player stats to PES 2021 format using machine learning
            </p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            <!-- Input Card -->
            <div class="card animate-slide-up" style="animation-delay: 0.1s;">
                <div class="card-header">
                    <h2 class="text-xl font-semibold">Input Stats</h2>
                    <span class="badge">eFootball</span>
                </div>
                
                <!-- Tabs -->
                <div class="tab-container">
                    <button type="button" id="tabJson" class="tab-button active">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                        </svg>
                        JSON
                    </button>
                    <button type="button" id="tabManual" class="tab-button">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                        Manual
                    </button>
                </div>

                <form id="convertForm" class="space-y-6">
                    <!-- JSON Tab Content -->
                    <div id="tabContentJson" class="tab-content">
                        <div class="form-group">
                            <label for="efJson" class="form-label">JSON Stats</label>
                            <textarea 
                                id="efJson" 
                                name="efJson" 
                                rows="14" 
                                class="form-textarea"
                                placeholder='{"offensive_awareness": 96, "ball_control": 84, "dribbling": 88, ...}'
                            ></textarea>
                            <p id="jsonError" class="form-hint"></p>
                        </div>
                    </div>

                    <!-- Manual Tab Content -->
                    <div id="tabContentManual" class="tab-content hidden">
                        <div class="stats-accordion">
                            <!-- Attacking Stats -->
                            <div class="accordion-item" data-accordion="attacking">
                                <button type="button" class="accordion-trigger">
                                    <span class="flex items-center gap-2">
                                        <span class="stat-icon attacking">âš”</span>
                                        Attacking
                                    </span>
                                    <svg class="accordion-chevron w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <div class="accordion-content">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div class="form-group-compact">
                                            <label for="offensive_awareness">Offensive Awareness</label>
                                            <input type="number" id="offensive_awareness" min="1" max="120" placeholder="96" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="ball_control">Ball Control</label>
                                            <input type="number" id="ball_control" min="1" max="120" placeholder="84" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="dribbling">Dribbling</label>
                                            <input type="number" id="dribbling" min="1" max="120" placeholder="89" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="tight_possession">Tight Possession</label>
                                            <input type="number" id="tight_possession" min="1" max="120" placeholder="90" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="low_pass">Low Pass</label>
                                            <input type="number" id="low_pass" min="1" max="120" placeholder="95" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="lofted_pass">Lofted Pass</label>
                                            <input type="number" id="lofted_pass" min="1" max="120" placeholder="99" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="finishing">Finishing</label>
                                            <input type="number" id="finishing" min="1" max="120" placeholder="85" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="heading">Heading</label>
                                            <input type="number" id="heading" min="1" max="120" placeholder="62" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="place_kicking">Place Kicking</label>
                                            <input type="number" id="place_kicking" min="1" max="120" placeholder="94" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="curl">Curl</label>
                                            <input type="number" id="curl" min="1" max="120" placeholder="100" class="form-input">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Physical Stats -->
                            <div class="accordion-item" data-accordion="physical">
                                <button type="button" class="accordion-trigger">
                                    <span class="flex items-center gap-2">
                                        <span class="stat-icon physical">ðŸ’ª</span>
                                        Physical
                                    </span>
                                    <svg class="accordion-chevron w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <div class="accordion-content hidden">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div class="form-group-compact">
                                            <label for="speed">Speed</label>
                                            <input type="number" id="speed" min="1" max="120" placeholder="89" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="acceleration">Acceleration</label>
                                            <input type="number" id="acceleration" min="1" max="120" placeholder="86" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="kicking_power">Kicking Power</label>
                                            <input type="number" id="kicking_power" min="1" max="120" placeholder="95" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="jump">Jump</label>
                                            <input type="number" id="jump" min="1" max="120" placeholder="59" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="physical_contact">Physical Contact</label>
                                            <input type="number" id="physical_contact" min="1" max="120" placeholder="67" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="balance">Balance</label>
                                            <input type="number" id="balance" min="1" max="120" placeholder="82" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="stamina">Stamina</label>
                                            <input type="number" id="stamina" min="1" max="120" placeholder="94" class="form-input">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Defending Stats -->
                            <div class="accordion-item" data-accordion="defending">
                                <button type="button" class="accordion-trigger">
                                    <span class="flex items-center gap-2">
                                        <span class="stat-icon defending">ðŸ›¡</span>
                                        Defending
                                    </span>
                                    <svg class="accordion-chevron w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <div class="accordion-content hidden">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div class="form-group-compact">
                                            <label for="defensive_awareness">Defensive Awareness</label>
                                            <input type="number" id="defensive_awareness" min="1" max="120" placeholder="60" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="defensive_engagement">Defensive Engagement</label>
                                            <input type="number" id="defensive_engagement" min="1" max="120" placeholder="60" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="tackling">Tackling</label>
                                            <input type="number" id="tackling" min="1" max="120" placeholder="56" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="aggression">Aggression</label>
                                            <input type="number" id="aggression" min="1" max="120" placeholder="64" class="form-input">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Goalkeeper Stats -->
                            <div class="accordion-item" data-accordion="goalkeeper">
                                <button type="button" class="accordion-trigger">
                                    <span class="flex items-center gap-2">
                                        <span class="stat-icon goalkeeper">ðŸ§¤</span>
                                        Goalkeeper
                                    </span>
                                    <svg class="accordion-chevron w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <div class="accordion-content hidden">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div class="form-group-compact">
                                            <label for="goalkeeping">GK Awareness</label>
                                            <input type="number" id="goalkeeping" min="1" max="120" placeholder="41" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="gk_catching">GK Catching</label>
                                            <input type="number" id="gk_catching" min="1" max="120" placeholder="41" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="gk_parrying">GK Clearing</label>
                                            <input type="number" id="gk_parrying" min="1" max="120" placeholder="41" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="gk_reflexes">GK Reflexes</label>
                                            <input type="number" id="gk_reflexes" min="1" max="120" placeholder="41" class="form-input">
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="gk_reach">GK Reach</label>
                                            <input type="number" id="gk_reach" min="1" max="120" placeholder="41" class="form-input">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Other Stats -->
                            <div class="accordion-item" data-accordion="other">
                                <button type="button" class="accordion-trigger">
                                    <span class="flex items-center gap-2">
                                        <span class="stat-icon other">âš™</span>
                                        Other
                                    </span>
                                    <svg class="accordion-chevron w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <div class="accordion-content hidden">
                                    <div class="grid grid-cols-2 gap-3">
                                        <div class="form-group-compact">
                                            <label for="weak_foot_usage">Weak Foot Usage</label>
                                            <select id="weak_foot_usage" class="form-select">
                                                <option value="">Select...</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                            </select>
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="weak_foot_acc">Weak Foot Accuracy</label>
                                            <select id="weak_foot_acc" class="form-select">
                                                <option value="">Select...</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                            </select>
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="form">Form</label>
                                            <select id="form" class="form-select">
                                                <option value="">Select...</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                            </select>
                                        </div>
                                        <div class="form-group-compact">
                                            <label for="injury_resistance">Injury Resistance</label>
                                            <select id="injury_resistance" class="form-select">
                                                <option value="">Select...</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Position & Overall -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="position" class="form-label">Position</label>
                            <select id="position" name="position" class="form-select">
                                <option value="CF">CF - Center Forward</option>
                                <option value="SS">SS - Second Striker</option>
                                <option value="LWF">LWF - Left Wing Forward</option>
                                <option value="RWF">RWF - Right Wing Forward</option>
                                <option value="AMF">AMF - Attacking Midfielder</option>
                                <option value="LMF">LMF - Left Midfielder</option>
                                <option value="RMF">RMF - Right Midfielder</option>
                                <option value="CMF">CMF - Center Midfielder</option>
                                <option value="DMF">DMF - Defensive Midfielder</option>
                                <option value="LB">LB - Left Back</option>
                                <option value="RB">RB - Right Back</option>
                                <option value="CB">CB - Center Back</option>
                                <option value="GK">GK - Goalkeeper</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="efOverall" class="form-label">Overall (Optional)</label>
                            <input 
                                type="number" 
                                id="efOverall" 
                                name="efOverall" 
                                min="1" 
                                max="120" 
                                placeholder="100"
                                class="form-input"
                            >
                        </div>
                    </div>

                    <button type="submit" id="convertBtn" class="btn-primary">
                        <span class="btn-text">Convert Stats</span>
                        <svg class="btn-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                        <span class="btn-loader hidden">
                            <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </span>
                    </button>
                </form>
            </div>

            <!-- Results Card -->
            <div class="card animate-slide-up" style="animation-delay: 0.2s;">
                <div class="card-header">
                    <h2 class="text-xl font-semibold">Conversion Result</h2>
                    <span class="badge badge-dark">PES 2021</span>
                </div>
                
                <div id="loading" class="hidden result-state">
                    <div class="loading-spinner"></div>
                    <p class="text-muted mt-4">Processing conversion...</p>
                </div>

                <div id="error" class="hidden error-message"></div>

                <div id="results" class="hidden space-y-6">
                    <!-- Overall Rating Display -->
                    <div class="overall-display">
                        <div class="overall-ring">
                            <svg viewBox="0 0 100 100" class="overall-ring-svg">
                                <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="2" class="text-border"/>
                                <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="3" stroke-dasharray="283" stroke-dashoffset="283" class="overall-ring-progress text-foreground"/>
                            </svg>
                            <span id="pesOverall" class="overall-value">-</span>
                        </div>
                        <div class="text-center">
                            <p class="text-sm text-muted">Overall Rating</p>
                        </div>
                    </div>

                    <!-- Result Tabs -->
                    <div class="result-tabs">
                        <button type="button" id="resultTabTable" class="result-tab active">Table View</button>
                        <button type="button" id="resultTabJson" class="result-tab">JSON</button>
                    </div>

                    <div id="resultContentTable" class="result-content">
                        <div id="markdownTable" class="stats-table"></div>
                    </div>

                    <div id="resultContentJson" class="result-content hidden">
                        <div class="json-container">
                            <button type="button" id="copyJsonBtn" class="copy-btn" title="Copy JSON">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                </svg>
                            </button>
                            <pre id="jsonResult" class="json-output"></pre>
                        </div>
                    </div>
                </div>

                <div id="empty" class="empty-state">
                    <div class="empty-icon">
                        <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <p class="text-muted">Results will appear here</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 text-center text-sm text-muted animate-fade-in" style="animation-delay: 0.4s;">
            <p>Built with Machine Learning â€¢ ExtraTrees + Ridge Ensemble</p>
        </footer>
    </div>

    <!-- Modular JavaScript -->
    <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tabs.js') }}"></script>
    <script src="{{ url_for('static', filename='js/accordion.js') }}"></script>
    <script src="{{ url_for('static', filename='js/form.js') }}"></script>
    <script src="{{ url_for('static', filename='js/effects.js') }}"></script>
</body>
</html>
